#language: cpp
dist: bionic
os: linux
language: minimal
arch: amd64
#sudo: true
git:
  quiet: true
  depth: 5
branches:
  only:
  - master
  - /^v\d+\.\d+(\.\d+)?(-\S*)?$/
  - /^travis*$/
# except:
#  - /^v\d+\.\d+\.\d+(\.\d+)?(-\S*)?$/
cache:
  timeout: 1000
  ccache: true
  directories:
  - depends/built
  - depends/work/build
  - depends/sdk-sources
#  - $TRAVIS_BUILD_DIR/depends/built
#  - $TRAVIS_BUILD_DIR/depends/sdk-sources
#  - $TRAVIS_BUILD_DIR/ci/scratch/.ccache
#  - $TRAVIS_BUILD_DIR/releases/$HOST
#  - depends/i686-w64-mingw32
#   - $HOME/.ccache
#  - usr/local/Homebrew
#    - $HOME/Library/Caches/Homebrew
#    - /usr/local/Homebrew
#before_cache:
#  - if [ "${TRAVIS_OS_NAME}" = "osx" ]; then brew cleanup; fi
addons:
  apt:
    sources:
    - ppa:bitcoin/bitcoin
    packages:
    - autoconf
    - autotools-dev
    - binutils
    - bsdmainutils
    - build-essential
    - software-properties-common
    - cmake
    - curl
    - libboost-all-dev
    - libbz2-dev
    - libcap-devv
    - libevent-dev
    - libssl-dev
    - libtool
    - linux-libc-dev 
    - miniupnpc
    - pkg-config
    - python-dev
    - python-setuptools
    - python3
    - python3-zmq
    - zip
    - zlib1g-dev
env:     
  global:
#  - CI_RETRY_EXE="travis_retry"
#  - CI_WAIT="while sleep 500; do echo .; done"
#  - CACHE_ERR_MSG="Error! Initial build successful, but not enough time remains to run later build stages and tests. See https://docs.travis-ci.com/user/customizing-the-build#build-timeouts . Please manually re-run this job by using the travis restart button. The next run should not time out because the build cache has been saved."
  - XAYA_VERSION=0.4.0.0
  - CCACHE_COMPRESS=1
  - CCACHE_SIZE=2500M
  - CCACHE_CPP2=1
  - CCACHE_TEMPDIR=/tmp/.ccache-temp
  - MAKEJOBS="-s -k -j 4"
matrix:
  include:
#  - name: Linux ARM 32 Bit
#    addons:
#      apt:
#        packages:
#        - g++-arm-linux-gnueabihf
#        - binutils-arm-linux-gnueabihf
#   env:
#    - XAYA_CONFIG="--enable-glibc-back-compat --with-gui=no"
#    - HOST=arm-linux-gnueabihf
#    - LABEL=ARM
#    os: linux
#  - name: Linux i686 32 Bit
#    addons:
#      apt:
#        packages:
#        - bc
#        - g++-multilib
#        - libprotobuf-dev
#        - libqrencode-dev
#        - python3-zmq
#        - qtdeclarative5-dev
#   env:
#    - XAYA_CONFIG="--enable-zmq --enable-glibc-back-compat
#      --with-gui=qt5 LDFLAGS=-static-libstdc++"
#    - HOST=i686-pc-linux-gnu
#    - LABEL=linux32
#    - PYZMQ=true
#    os: linux
